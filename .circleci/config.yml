version: 2
orbs:
  node: circleci/node@4.0.1

jobs: 
  build: 
    docker: 
      - 
        image: "circleci/openjdk:stretch"
    steps: 
      - checkout
      - 
        run: 
          command: "chmod +x mvnw"
          name: "Giving permissions"
      - 
        run: 
          command: "./mvnw -Dmaven.test.skip=true package"
  deploy: 
    docker: 
      - 
        image: "circleci/openjdk:stretch"
    steps: 
      - checkout
      - 
        run: 
          command: "surge --project index.html --domain demo123.surge.sh"
  test: 
    docker: 
      - 
        image: "circleci/openjdk:stretch"
    steps: 
      - checkout
      - 
        run: 
          command: "chmod +x mvnw"
          name: "Giving permissions"
      - 
        run: 
          command: "./mvnw test"
version: 2.0
workflows: 
  build-test: 
    jobs: 
      - build
      - 
        test: 
          requires: 
            - build
      - 
        deploy: 
          requires: 
            - test

